{
  "table_name": "password_resets",
  "description": "Tabel untuk mengelola password reset requests",
  "phase": "phase_1",
  "columns": {
    "id": {
      "type": "BIGINT",
      "unsigned": true,
      "auto_increment": true,
      "primary_key": true,
      "description": "Primary key untuk tabel password_resets"
    },
    "user_id": {
      "type": "BIGINT",
      "unsigned": true,
      "not_null": true,
      "description": "Foreign key ke tabel users",
      "references": "users(id)"
    },
    "token": {
      "type": "VARCHAR(255)",
      "unique": true,
      "not_null": true,
      "description": "Token unik untuk password reset",
      "security": {
        "secure_token": true,
        "single_use": true,
        "expiry": "1 hour"
      }
    },
    "email": {
      "type": "VARCHAR(100)",
      "not_null": true,
      "description": "Email untuk verification (stored untuk consistency check)"
    },
    "is_used": {
      "type": "BOOLEAN",
      "default": false,
      "not_null": true,
      "description": "Apakah token sudah digunakan"
    },
    "expires_at": {
      "type": "TIMESTAMP",
      "not_null": true,
      "description": "Waktu kadaluarsa token"
    },
    "created_at": {
      "type": "TIMESTAMP",
      "default": "CURRENT_TIMESTAMP",
      "not_null": true,
      "description": "Waktu pembuatan token"
    },
    "used_at": {
      "type": "TIMESTAMP",
      "nullable": true,
      "description": "Waktu token digunakan"
    }
  },
  "constraints": {
    "unique_constraints": [
      {
        "name": "uk_password_resets_token",
        "columns": ["token"]
      }
    ],
    "foreign_key_constraints": [
      {
        "name": "fk_password_resets_user_id",
        "column": "user_id",
        "references": "users(id)",
        "on_delete": "CASCADE",
        "on_update": "CASCADE"
      }
    ]
  },
  "security": {
    "token_security": {
      "length": "64 characters",
      "algorithm": "SHA-256",
      "single_use": true,
      "expiry_time": "1 hour"
    },
    "rate_limiting": {
      "max_requests_per_hour": 5,
      "per_email": true
    },
    "cleanup_policy": {
      "expired_tokens": "cleanup_after_24_hours",
      "used_tokens": "cleanup_after_24_hours"
    }
  }
}